"use strict";
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
const React = require("react");
const react_1 = require("react");
const react_native_1 = require("react-native");
const MaterialCommunityIcons_1 = require("react-native-vector-icons/MaterialCommunityIcons");
const react_native_material_ripple_1 = require("react-native-material-ripple");
const helper_1 = require("./helper");
const DEFAULT_TOOLBAR_HEIGHT = 300;
class MaterialCollapsibleToolbarContainer extends react_1.Component {
    constructor(props) {
        super(props);
        const APPBAR_HEIGHT = react_native_1.Platform.OS === 'ios' ? 44 : 56;
        const ANDROID_STATUS_BAR_HEIGHT = props.translucentStatusBar ? react_native_1.StatusBar.currentHeight : 0;
        this.statusBarHeight = react_native_1.Platform.OS === 'ios' ? helper_1.ifIphoneX(44, 20) : ANDROID_STATUS_BAR_HEIGHT;
        this.navBarHeight = react_native_1.Platform.OS === 'ios' ? APPBAR_HEIGHT + this.statusBarHeight : APPBAR_HEIGHT;
        this.maxScrollableHeight = props.toolBarHeight - this.navBarHeight;
        const inputRange1 = [this.maxScrollableHeight / 2, this.maxScrollableHeight];
        const inputRange2 = [this.maxScrollableHeight - 0.1, this.maxScrollableHeight];
        this.blurRadius = new react_native_1.Animated.Value(0);
        this.scrollOffsetY = new react_native_1.Animated.Value(0);
        this.toolBarOpacity = this.scrollOffsetY.interpolate({
            inputRange: inputRange1,
            outputRange: [1, 0]
        });
        this.toolBarOverlayOpacity = this.scrollOffsetY.interpolate({
            inputRange: inputRange1,
            outputRange: [0, 1]
        });
        this.navBarOpacity = this.scrollOffsetY.interpolate({
            inputRange: inputRange2,
            outputRange: [0, 1]
        });
        this.navBarOverlayOpacity = this.scrollOffsetY.interpolate({
            inputRange: inputRange2,
            outputRange: [1, 0]
        });
        this.titleFontSize = this.scrollOffsetY.interpolate({
            inputRange: inputRange1,
            outputRange: [2, 1]
        });
        this.blurRadius = this.scrollOffsetY.interpolate({
            inputRange: inputRange1,
            outputRange: [1, 2]
        });
    }
    render() {
        const _a = this.props, { collapsedNavBarBackgroundColor, imageSource, onContentScroll, renderContent, toolBarHeight } = _a, props = __rest(_a, ["collapsedNavBarBackgroundColor", "imageSource", "onContentScroll", "renderContent", "toolBarHeight"]);
        if (!imageSource) {
            //  console.error('Either an image source or a custom toolbar component must be provided')
        }
        return (React.createElement(react_native_1.View, { style: styles.container },
            React.createElement(react_native_1.Animated.ScrollView, Object.assign({}, props, { scrollEventThrottle: 1, onScroll: react_native_1.Animated.event([{ nativeEvent: { contentOffset: { y: this.scrollOffsetY } } }], {
                    useNativeDriver: true,
                    listener: onContentScroll
                }) }),
                React.createElement(react_native_1.Animated.View, { style: [
                        styles.toolBarOverlay,
                        {
                            backgroundColor: collapsedNavBarBackgroundColor,
                            height: toolBarHeight,
                            opacity: this.toolBarOverlayOpacity
                        }
                    ] },
                    React.createElement(MaterialCommunityIcons_1.default, { style: { position: 'absolute', left: 16, top: 16 }, name: 'menu', size: 24, color: 'white' }),
                    React.createElement(react_native_1.Animated.Text, { style: {
                            transform: [
                                { scale: this.titleFontSize }
                            ],
                            position: 'absolute',
                            marginLeft: 56,
                            bottom: 16,
                            textAlign: 'center',
                            color: '#FFF'
                        } }, this.props.title)),
                React.createElement(react_native_1.Animated.View, { style: { opacity: this.toolBarOpacity } },
                    React.createElement(react_native_1.View, { style: { height: toolBarHeight } },
                        React.createElement(react_native_1.Animated.Image, { source: { uri: imageSource || '' }, style: { height: toolBarHeight }, blurRadius: this.blurRadius }),
                        React.createElement(react_native_1.Animated.View, { style: { position: 'absolute', top: 50, bottom: 50, left: 0, right: 0, alignItems: 'center', justifyContent: 'center' } }, this.props.renderCollapsedToolbarContent()),
                        React.createElement(react_native_1.Animated.Text, { style: {
                                transform: [
                                    { scale: this.titleFontSize }
                                ],
                                position: 'absolute',
                                marginLeft: 56,
                                bottom: 16,
                                textAlign: 'center',
                                color: '#FFF'
                            } }, this.props.title))),
                renderContent()),
            React.createElement(react_native_1.Animated.View, { style: [
                    styles.navBarContainer,
                    {
                        backgroundColor: collapsedNavBarBackgroundColor,
                        height: this.navBarHeight,
                        opacity: this.navBarOpacity,
                        paddingTop: this.statusBarHeight
                    }
                ] },
                React.createElement(react_native_material_ripple_1.default, { rippleColor: this.props.textColor, onPress: () => this.props.onLeftIconPress(), style: {
                        position: 'absolute', left: 0, top: 0,
                        height: 56,
                        width: 56,
                        zIndex: 100,
                        overflow: 'hidden',
                        alignItems: 'center',
                        justifyContent: 'center'
                    } },
                    React.createElement(MaterialCommunityIcons_1.default, { name: this.props.leftButtonIcon, size: 24, color: this.props.textColor })),
                this.props.rightButtonIcon &&
                    React.createElement(react_native_material_ripple_1.default, { rippleColor: this.props.textColor, onPress: () => this.props.onRightIconPress(), style: {
                            position: 'absolute', right: 0, top: 0,
                            height: 56,
                            width: 56,
                            overflow: 'hidden',
                            alignItems: 'center',
                            justifyContent: 'center'
                        } },
                        React.createElement(MaterialCommunityIcons_1.default, { name: this.props.rightButtonIcon, size: 24, color: this.props.textColor })),
                React.createElement(react_native_1.Animated.Text, { style: {
                        transform: [
                            { scale: 1 }
                        ],
                        position: 'absolute',
                        marginLeft: 56,
                        bottom: 16,
                        textAlign: 'center',
                        color: '#FFF'
                    } }, this.props.title)),
            React.createElement(react_native_material_ripple_1.default, { rippleColor: this.props.textColor, onPress: () => this.props.onLeftIconPress(), style: {
                    position: 'absolute', left: 0, top: 0,
                    height: 56,
                    width: 56,
                    overflow: 'hidden',
                    alignItems: 'center',
                    justifyContent: 'center'
                } },
                React.createElement(MaterialCommunityIcons_1.default, { name: this.props.leftButtonIcon, size: 24, color: this.props.textColor })),
            this.props.rightButtonIcon &&
                React.createElement(react_native_material_ripple_1.default, { rippleColor: this.props.textColor, onPress: () => this.props.onRightIconPress(), style: {
                        position: 'absolute', right: 0, top: 0,
                        height: 56,
                        width: 56,
                        overflow: 'hidden',
                        alignItems: 'center',
                        justifyContent: 'center'
                    } },
                    React.createElement(MaterialCommunityIcons_1.default, { name: this.props.rightButtonIcon, size: 24, color: this.props.textColor }))));
    }
}
MaterialCollapsibleToolbarContainer.defaultProps = {
    collapsedNavBarBackgroundColor: '#FFF',
    imageSource: '',
    toolBarHeight: DEFAULT_TOOLBAR_HEIGHT,
    translucentStatusBar: false,
    renderCollapsedToolbarContent: () => { },
    renderContent: () => { },
    onContentScroll: () => { },
    onLeftIconPress: () => { },
    onRightIconPress: () => { }
};
exports.default = MaterialCollapsibleToolbarContainer;
const styles = react_native_1.StyleSheet.create({
    container: {
        flex: 1
    },
    toolBarOverlay: {
        position: 'absolute',
        top: 0,
        left: 0,
        right: 0
    },
    navBarContainer: Object.assign({ position: 'absolute', left: 0, right: 0, flexDirection: 'row' }, react_native_1.Platform.select({
        ios: {
            shadowColor: 'black',
            shadowOpacity: 0.1,
            shadowRadius: react_native_1.StyleSheet.hairlineWidth,
            shadowOffset: {
                width: react_native_1.StyleSheet.hairlineWidth,
                height: react_native_1.StyleSheet.hairlineWidth
            },
            borderBottomWidth: react_native_1.StyleSheet.hairlineWidth,
            borderBottomColor: 'rgba(0, 0, 0, .3)'
        },
        android: {
            elevation: 4
        }
    })),
    navBarOverlay: {
        backgroundColor: 'rgba(0, 0, 0, 0)',
        position: 'absolute',
        left: 0,
        right: 0
    }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXENvZGluZ1Byb2plY3RzXFxHaXRodWJcXHR5cGVzY3JpcHQtbWF0ZXJpYWwtdWktY29sbGVjdGlvblxcRXhhbXBsZUFuZFRlc3RcXGxpYlxcQ29tcG9uZW50c1xcTWF0ZXJpYWxDb2xsYXBzaWJsZVRvb2xiYXJDb250YWluZXJcXGluZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLCtCQUE4QjtBQUM5QixpQ0FBK0I7QUFDL0IsK0NBQThGO0FBQzlGLDZGQUFxRjtBQUNyRiwrRUFBa0Q7QUFDbEQscUNBQWtDO0FBRWxDLE1BQU0sc0JBQXNCLEdBQUcsR0FBRyxDQUFDO0FBa0JuQyxNQUFxQixtQ0FBb0MsU0FBUSxpQkFBbUQ7SUF3QmhILFlBQVksS0FBSztRQUNiLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUViLE1BQU0sYUFBYSxHQUFHLHVCQUFRLENBQUMsRUFBRSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDdEQsTUFBTSx5QkFBeUIsR0FBRyxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLHdCQUFTLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFM0YsSUFBSSxDQUFDLGVBQWUsR0FBRyx1QkFBUSxDQUFDLEVBQUUsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLGtCQUFTLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQztRQUM3RixJQUFJLENBQUMsWUFBWSxHQUFHLHVCQUFRLENBQUMsRUFBRSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQztRQUNqRyxJQUFJLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQ25FLE1BQU0sV0FBVyxHQUFHLENBQUMsSUFBSSxDQUFDLG1C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QyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkQ6XFxDb2RpbmdQcm9qZWN0c1xcR2l0aHViXFx0eXBlc2NyaXB0LW1hdGVyaWFsLXVpLWNvbGxlY3Rpb25cXEV4YW1wbGVBbmRUZXN0XFxsaWJcXENvbXBvbmVudHNcXE1hdGVyaWFsQ29sbGFwc2libGVUb29sYmFyQ29udGFpbmVyXFxpbmRleC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQge0NvbXBvbmVudH0gZnJvbSAncmVhY3QnXG5pbXBvcnQge0FuaW1hdGVkICwgUGxhdGZvcm0sIFN0YXR1c0JhciwgU3R5bGVTaGVldCwgVmlldywgU2Nyb2xsVmlld1Byb3BzfSBmcm9tICdyZWFjdC1uYXRpdmUnXG5pbXBvcnQgTWF0ZXJpYWxDb21tdW5pdHlJY29ucyBmcm9tICdyZWFjdC1uYXRpdmUtdmVjdG9yLWljb25zL01hdGVyaWFsQ29tbXVuaXR5SWNvbnMnXG5pbXBvcnQgUmlwcGxlIGZyb20gJ3JlYWN0LW5hdGl2ZS1tYXRlcmlhbC1yaXBwbGUnO1xuaW1wb3J0IHtpZklwaG9uZVh9IGZyb20gJy4vaGVscGVyJ1xuXG5jb25zdCBERUZBVUxUX1RPT0xCQVJfSEVJR0hUID0gMzAwO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1hdGVyaWFsQ29sbGFwc2libGVUb29sYmFyQ29udGFpbmVyUHJvcHMgZXh0ZW5kcyBTY3JvbGxWaWV3UHJvcHMge1xuICAgIGNvbGxhcHNlZE5hdkJhckJhY2tncm91bmRDb2xvcj86IHN0cmluZyxcbiAgICBpbWFnZVNvdXJjZT86IHN0cmluZyxcbiAgICB0aXRsZT86c3RyaW5nLFxuICAgIG9uQ29udGVudFNjcm9sbD8oKTogdm9pZCxcbiAgICByZW5kZXJDb250ZW50PygpOiBSZWFjdC5SZWFjdE5vZGUsXG4gICAgcmVuZGVyQ29sbGFwc2VkVG9vbGJhckNvbnRlbnQ/KCk6UmVhY3QuUmVhY3ROb2RlLFxuICAgIHRvb2xCYXJIZWlnaHQ/OiBudW1iZXIsXG4gICAgdHJhbnNsdWNlbnRTdGF0dXNCYXI/OiBib29sZWFuLFxuICAgIHRleHRDb2xvcj86IHN0cmluZyxcbiAgICBsZWZ0QnV0dG9uSWNvbj86IHN0cmluZyxcbiAgICBvbkxlZnRJY29uUHJlc3M/KCk6IHZvaWQsXG4gICAgcmlnaHRCdXR0b25JY29uPzogc3RyaW5nLFxuICAgIG9uUmlnaHRJY29uUHJlc3M/KCk6IHZvaWRcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWF0ZXJpYWxDb2xsYXBzaWJsZVRvb2xiYXJDb250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQ8TWF0ZXJpYWxDb2xsYXBzaWJsZVRvb2xiYXJDb250YWluZXJQcm9wcz4ge1xuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY29sbGFwc2VkTmF2QmFyQmFja2dyb3VuZENvbG9yOiAnI0ZGRicsXG4gICAgICAgIGltYWdlU291cmNlOiAnJyxcbiAgICAgICAgdG9vbEJhckhlaWdodDogREVGQVVMVF9UT09MQkFSX0hFSUdIVCxcbiAgICAgICAgdHJhbnNsdWNlbnRTdGF0dXNCYXI6IGZhbHNlLFxuICAgICAgICByZW5kZXJDb2xsYXBzZWRUb29sYmFyQ29udGVudDogKCkgPT4ge30sXG4gICAgICAgIHJlbmRlckNvbnRlbnQ6ICgpID0+IHt9LFxuICAgICAgICBvbkNvbnRlbnRTY3JvbGw6ICgpID0+IHt9LFxuICAgICAgICBvbkxlZnRJY29uUHJlc3M6ICgpID0+IHt9LFxuICAgICAgICBvblJpZ2h0SWNvblByZXNzOiAoKSA9PiB7fVxuICAgIH07XG4gICAgdGl0bGVGb250U2l6ZTogYW55O1xuICAgIHN0YXR1c0JhckhlaWdodDogbnVtYmVyO1xuICAgIG5hdkJhckhlaWdodDogbnVtYmVyO1xuICAgIG1heFNjcm9sbGFibGVIZWlnaHQ6IG51bWJlcjtcbiAgICBzY3JvbGxPZmZzZXRZOiBhbnk7XG4gICAgdG9vbEJhck9wYWNpdHk6IGFueTtcbiAgICB0b29sQmFyT3ZlcmxheU9wYWNpdHk6IGFueTtcbiAgICBuYXZCYXJPcGFjaXR5OiBhbnk7XG4gICAgbmF2QmFyT3ZlcmxheU9wYWNpdHk6IGFueTtcbiAgICBibHVyUmFkaXVzOmFueTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICBjb25zdCBBUFBCQVJfSEVJR0hUID0gUGxhdGZvcm0uT1MgPT09ICdpb3MnID8gNDQgOiA1NjtcbiAgICAgICAgY29uc3QgQU5EUk9JRF9TVEFUVVNfQkFSX0hFSUdIVCA9IHByb3BzLnRyYW5zbHVjZW50U3RhdHVzQmFyID8gU3RhdHVzQmFyLmN1cnJlbnRIZWlnaHQgOiAwO1xuXG4gICAgICAgIHRoaXMuc3RhdHVzQmFySGVpZ2h0ID0gUGxhdGZvcm0uT1MgPT09ICdpb3MnID8gaWZJcGhvbmVYKDQ0LCAyMCkgOiBBTkRST0lEX1NUQVRVU19CQVJfSEVJR0hUO1xuICAgICAgICB0aGlzLm5hdkJhckhlaWdodCA9IFBsYXRmb3JtLk9TID09PSAnaW9zJyA/IEFQUEJBUl9IRUlHSFQgKyB0aGlzLnN0YXR1c0JhckhlaWdodCA6IEFQUEJBUl9IRUlHSFQ7XG4gICAgICAgIHRoaXMubWF4U2Nyb2xsYWJsZUhlaWdodCA9IHByb3BzLnRvb2xCYXJIZWlnaHQgLSB0aGlzLm5hdkJhckhlaWdodDtcbiAgICAgICAgY29uc3QgaW5wdXRSYW5nZTEgPSBbdGhpcy5tYXhTY3JvbGxhYmxlSGVpZ2h0IC8gMiwgdGhpcy5tYXhTY3JvbGxhYmxlSGVpZ2h0XTtcbiAgICAgICAgY29uc3QgaW5wdXRSYW5nZTIgPSBbdGhpcy5tYXhTY3JvbGxhYmxlSGVpZ2h0IC0gMC4xLCB0aGlzLm1heFNjcm9sbGFibGVIZWlnaHRdO1xuICAgICAgICB0aGlzLmJsdXJSYWRpdXM9bmV3IEFuaW1hdGVkLlZhbHVlKDApO1xuICAgICAgICB0aGlzLnNjcm9sbE9mZnNldFkgPSBuZXcgQW5pbWF0ZWQuVmFsdWUoMCk7XG5cbiAgICAgICAgdGhpcy50b29sQmFyT3BhY2l0eSA9IHRoaXMuc2Nyb2xsT2Zmc2V0WS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICBpbnB1dFJhbmdlOiBpbnB1dFJhbmdlMSxcbiAgICAgICAgICAgIG91dHB1dFJhbmdlOiBbMSwgMF1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50b29sQmFyT3ZlcmxheU9wYWNpdHkgPSB0aGlzLnNjcm9sbE9mZnNldFkuaW50ZXJwb2xhdGUoe1xuICAgICAgICAgICAgaW5wdXRSYW5nZTogaW5wdXRSYW5nZTEsXG4gICAgICAgICAgICBvdXRwdXRSYW5nZTogWzAsIDFdXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubmF2QmFyT3BhY2l0eSA9IHRoaXMuc2Nyb2xsT2Zmc2V0WS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICBpbnB1dFJhbmdlOiBpbnB1dFJhbmdlMixcbiAgICAgICAgICAgIG91dHB1dFJhbmdlOiBbMCwgMV1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYXZCYXJPdmVybGF5T3BhY2l0eSA9IHRoaXMuc2Nyb2xsT2Zmc2V0WS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICBpbnB1dFJhbmdlOiBpbnB1dFJhbmdlMixcbiAgICAgICAgICAgIG91dHB1dFJhbmdlOiBbMSwgMF1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGl0bGVGb250U2l6ZSA9IHRoaXMuc2Nyb2xsT2Zmc2V0WS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICBpbnB1dFJhbmdlOiBpbnB1dFJhbmdlMSxcbiAgICAgICAgICAgIG91dHB1dFJhbmdlOiBbMiwgMV1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYmx1clJhZGl1cyA9IHRoaXMuc2Nyb2xsT2Zmc2V0WS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICBpbnB1dFJhbmdlOiBpbnB1dFJhbmdlMSxcbiAgICAgICAgICAgIG91dHB1dFJhbmdlOiBbMSwgMl1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNvbGxhcHNlZE5hdkJhckJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgIGltYWdlU291cmNlLFxuICAgICAgICAgICAgb25Db250ZW50U2Nyb2xsLFxuICAgICAgICAgICAgcmVuZGVyQ29udGVudCxcbiAgICAgICAgICAgIHRvb2xCYXJIZWlnaHQsXG4gICAgICAgICAgICAuLi5wcm9wc1xuICAgICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBpZiAoIWltYWdlU291cmNlKSB7XG4gICAgICAgICAgLy8gIGNvbnNvbGUuZXJyb3IoJ0VpdGhlciBhbiBpbWFnZSBzb3VyY2Ugb3IgYSBjdXN0b20gdG9vbGJhciBjb21wb25lbnQgbXVzdCBiZSBwcm92aWRlZCcpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICAgICAgICAgICAgICAgIDxBbmltYXRlZC5TY3JvbGxWaWV3XG4gICAgICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRXZlbnRUaHJvdHRsZT17MX1cbiAgICAgICAgICAgICAgICAgICAgb25TY3JvbGw9e0FuaW1hdGVkLmV2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgW3tuYXRpdmVFdmVudDoge2NvbnRlbnRPZmZzZXQ6IHt5OiB0aGlzLnNjcm9sbE9mZnNldFl9fX1dLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZU5hdGl2ZURyaXZlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcjogb25Db250ZW50U2Nyb2xsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPlxuXG5cbiAgICAgICAgICAgICAgICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzLnRvb2xCYXJPdmVybGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xsYXBzZWROYXZCYXJCYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdG9vbEJhckhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogdGhpcy50b29sQmFyT3ZlcmxheU9wYWNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TWF0ZXJpYWxDb21tdW5pdHlJY29uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7cG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6IDE2LCB0b3A6IDE2fX0gbmFtZT17J21lbnUnfSBzaXplPXsyNH0gY29sb3I9eyd3aGl0ZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8QW5pbWF0ZWQuVGV4dCBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2NhbGU6IHRoaXMudGl0bGVGb250U2l6ZX1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDU2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMTYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNGRkYnXG4gICAgICAgICAgICAgICAgICAgICAgICB9fT57dGhpcy5wcm9wcy50aXRsZX08L0FuaW1hdGVkLlRleHQ+XG5cbiAgICAgICAgICAgICAgICAgICAgPC9BbmltYXRlZC5WaWV3PlxuXG4gICAgICAgICAgICAgICAgICAgIDxBbmltYXRlZC5WaWV3IHN0eWxlPXt7b3BhY2l0eTogdGhpcy50b29sQmFyT3BhY2l0eX19PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8VmlldyBzdHlsZT17e2hlaWdodDogdG9vbEJhckhlaWdodH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbmltYXRlZC5JbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U9e3t1cmk6IGltYWdlU291cmNlIHx8ICcnfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3toZWlnaHQ6IHRvb2xCYXJIZWlnaHR9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibHVyUmFkaXVzPXt0aGlzLmJsdXJSYWRpdXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbmltYXRlZC5WaWV3IHN0eWxlPXt7cG9zaXRpb246J2Fic29sdXRlJywgdG9wOjUwLGJvdHRvbTo1MCxsZWZ0OjAscmlnaHQ6MCxhbGlnbkl0ZW1zOidjZW50ZXInLGp1c3RpZnlDb250ZW50OidjZW50ZXInfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnJlbmRlckNvbGxhcHNlZFRvb2xiYXJDb250ZW50KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9BbmltYXRlZC5WaWV3PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFuaW1hdGVkLlRleHQgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2NhbGU6IHRoaXMudGl0bGVGb250U2l6ZX1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogNTYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMTYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI0ZGRidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT57dGhpcy5wcm9wcy50aXRsZX08L0FuaW1hdGVkLlRleHQ+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVmlldz5cblxuXG4gICAgICAgICAgICAgICAgICAgIDwvQW5pbWF0ZWQuVmlldz5cblxuICAgICAgICAgICAgICAgICAgICB7cmVuZGVyQ29udGVudCgpfVxuXG4gICAgICAgICAgICAgICAgPC9BbmltYXRlZC5TY3JvbGxWaWV3PlxuXG4gICAgICAgICAgICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcy5uYXZCYXJDb250YWluZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xsYXBzZWROYXZCYXJCYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLm5hdkJhckhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiB0aGlzLm5hdkJhck9wYWNpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1RvcDogdGhpcy5zdGF0dXNCYXJIZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxSaXBwbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpcHBsZUNvbG9yPXt0aGlzLnByb3BzLnRleHRDb2xvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJlc3M9eygpID0+IHRoaXMucHJvcHMub25MZWZ0SWNvblByZXNzKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLCBsZWZ0OiAwLCB0b3A6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1NixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNTYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgekluZGV4OiAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TWF0ZXJpYWxDb21tdW5pdHlJY29uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubGVmdEJ1dHRvbkljb259IHNpemU9ezI0fSBjb2xvcj17dGhpcy5wcm9wcy50ZXh0Q29sb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L1JpcHBsZT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMucmlnaHRCdXR0b25JY29uICYmXG4gICAgICAgICAgICAgICAgICAgIDxSaXBwbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpcHBsZUNvbG9yPXt0aGlzLnByb3BzLnRleHRDb2xvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJlc3M9eygpID0+IHRoaXMucHJvcHMub25SaWdodEljb25QcmVzcygpfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywgcmlnaHQ6IDAsIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDU2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1NixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInXG4gICAgICAgICAgICAgICAgICAgICAgICB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxNYXRlcmlhbENvbW11bml0eUljb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17dGhpcy5wcm9wcy5yaWdodEJ1dHRvbkljb259IHNpemU9ezI0fSBjb2xvcj17dGhpcy5wcm9wcy50ZXh0Q29sb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L1JpcHBsZT5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8QW5pbWF0ZWQuVGV4dCBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3NjYWxlOiAxfV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDU2LFxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAxNixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNGRkYnXG4gICAgICAgICAgICAgICAgICAgIH19Pnt0aGlzLnByb3BzLnRpdGxlfTwvQW5pbWF0ZWQuVGV4dD5cbiAgICAgICAgICAgICAgICA8L0FuaW1hdGVkLlZpZXc+XG4gICAgICAgICAgICAgICAgPFJpcHBsZVxuICAgICAgICAgICAgICAgICAgICByaXBwbGVDb2xvcj17dGhpcy5wcm9wcy50ZXh0Q29sb3J9XG4gICAgICAgICAgICAgICAgICAgIG9uUHJlc3M9eygpID0+IHRoaXMucHJvcHMub25MZWZ0SWNvblByZXNzKCl9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywgbGVmdDogMCwgdG9wOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1NixcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1NixcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInXG4gICAgICAgICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgICAgICA8TWF0ZXJpYWxDb21tdW5pdHlJY29uc1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17dGhpcy5wcm9wcy5sZWZ0QnV0dG9uSWNvbn0gc2l6ZT17MjR9IGNvbG9yPXt0aGlzLnByb3BzLnRleHRDb2xvcn1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L1JpcHBsZT5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5yaWdodEJ1dHRvbkljb24gJiZcbiAgICAgICAgICAgICAgICA8UmlwcGxlXG4gICAgICAgICAgICAgICAgICAgIHJpcHBsZUNvbG9yPXt0aGlzLnByb3BzLnRleHRDb2xvcn1cbiAgICAgICAgICAgICAgICAgICAgb25QcmVzcz17KCkgPT4gdGhpcy5wcm9wcy5vblJpZ2h0SWNvblByZXNzKCl9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywgcmlnaHQ6IDAsIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTYsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNTYsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICB9fT5cbiAgICAgICAgICAgICAgICAgICAgPE1hdGVyaWFsQ29tbXVuaXR5SWNvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMucmlnaHRCdXR0b25JY29ufSBzaXplPXsyNH0gY29sb3I9e3RoaXMucHJvcHMudGV4dENvbG9yfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvUmlwcGxlPlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICApXG4gICAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gICAgY29udGFpbmVyOiB7XG4gICAgICAgIGZsZXg6IDFcbiAgICB9LFxuICAgIHRvb2xCYXJPdmVybGF5OiB7XG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHJpZ2h0OiAwXG4gICAgfSxcbiAgICBuYXZCYXJDb250YWluZXI6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScgYXMgJ2Fic29sdXRlJyxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnIGFzICdyb3cnLFxuICAgICAgICAuLi5QbGF0Zm9ybS5zZWxlY3Qoe1xuICAgICAgICAgICAgaW9zOiB7XG4gICAgICAgICAgICAgICAgc2hhZG93Q29sb3I6ICdibGFjaycsXG4gICAgICAgICAgICAgICAgc2hhZG93T3BhY2l0eTogMC4xLFxuICAgICAgICAgICAgICAgIHNoYWRvd1JhZGl1czogU3R5bGVTaGVldC5oYWlybGluZVdpZHRoLFxuICAgICAgICAgICAgICAgIHNoYWRvd09mZnNldDoge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogU3R5bGVTaGVldC5oYWlybGluZVdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFN0eWxlU2hlZXQuaGFpcmxpbmVXaWR0aFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tV2lkdGg6IFN0eWxlU2hlZXQuaGFpcmxpbmVXaWR0aCxcbiAgICAgICAgICAgICAgICBib3JkZXJCb3R0b21Db2xvcjogJ3JnYmEoMCwgMCwgMCwgLjMpJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFuZHJvaWQ6IHtcbiAgICAgICAgICAgICAgICBlbGV2YXRpb246IDRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9LFxuICAgIG5hdkJhck92ZXJsYXk6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLCAwLCAwLCAwKScsXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICByaWdodDogMFxuICAgIH1cbn0pO1xuIl0sInZlcnNpb24iOjN9